<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuestionario: Anatomía del Dorso</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .option-card {
            transition: all 0.2s ease;
        }
        .option-card:hover:not(.disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .correct-anim {
            background-color: #d1fae5 !important;
            border-color: #10b981 !important;
        }
        .wrong-anim {
            background-color: #fee2e2 !important;
            border-color: #ef4444 !important;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- Container Principal -->
    <div class="bg-white w-full max-w-4xl rounded-2xl shadow-xl overflow-hidden min-h-[600px] flex flex-col relative">
        
        <!-- Header -->
        <div class="bg-slate-900 text-white p-6 flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold tracking-tight">Anatomía del Dorso</h1>
            </div>
            <div id="progress-container" class="hidden flex items-center gap-3">
                <span class="text-sm font-medium text-slate-300">Pregunta <span id="current-q">1</span>/<span id="total-q">10</span></span>
                <div class="w-32 h-2 bg-slate-700 rounded-full overflow-hidden">
                    <div id="progress-bar" class="h-full bg-blue-500 transition-all duration-300" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- Start Screen -->
        <div id="start-screen" class="flex-1 flex flex-col items-center justify-center p-8 text-center fade-in">
            <div class="w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mb-6 text-blue-600">
                <i class="fas fa-bone text-4xl"></i>
            </div>
            <h2 class="text-3xl font-bold text-gray-800 mb-8">Cuestionario de Anatomía</h2>
            
            <button onclick="startQuiz()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-10 rounded-xl transition-all transform hover:scale-105 shadow-lg flex items-center gap-2">
                <span>Iniciar Cuestionario</span>
                <i class="fas fa-arrow-right"></i>
            </button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden flex-1 flex flex-col p-6 fade-in">
            <!-- Question Text -->
            <div class="mb-6">
                <span class="inline-block px-3 py-1 bg-blue-100 text-blue-800 text-xs font-bold rounded-full mb-3 tracking-wide uppercase" id="q-category">Pregunta</span>
                <h3 id="q-text" class="text-xl md:text-2xl font-semibold text-gray-800 leading-relaxed">
                    <!-- Pergunta aqui -->
                </h3>
            </div>

            <!-- Options Grid -->
            <div id="options-container" class="grid gap-3 mb-6">
                <!-- Opções injetadas via JS -->
            </div>

            <!-- Feedback Area (Hidden initially) -->
            <div id="feedback-area" class="hidden mt-auto bg-gray-50 border-l-4 p-4 rounded-r-lg">
                <div class="flex items-start gap-3">
                    <div id="feedback-icon" class="mt-1"></div>
                    <div>
                        <h4 id="feedback-title" class="font-bold text-gray-900 mb-1"></h4>
                        <p id="feedback-text" class="text-gray-600 text-sm leading-relaxed"></p>
                    </div>
                </div>
                <button id="next-btn" onclick="nextQuestion()" class="mt-4 bg-gray-900 text-white px-6 py-2 rounded-lg text-sm font-medium hover:bg-gray-800 transition-colors ml-auto block">
                    Siguiente Pregunta
                </button>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="hidden flex-1 flex flex-col items-center justify-center p-8 text-center fade-in">
            <div class="mb-6 relative">
                <svg class="w-32 h-32 transform -rotate-90">
                    <circle cx="64" cy="64" r="56" stroke="#e5e7eb" stroke-width="12" fill="none"></circle>
                    <circle id="score-circle" cx="64" cy="64" r="56" stroke="#3b82f6" stroke-width="12" fill="none" stroke-dasharray="351" stroke-dashoffset="351" class="transition-all duration-1000"></circle>
                </svg>
                <div class="absolute inset-0 flex items-center justify-center flex-col">
                    <span id="final-score" class="text-3xl font-bold text-gray-800">0%</span>
                </div>
            </div>
            
            <h2 class="text-2xl font-bold text-gray-800 mb-2">¡Cuestionario Finalizado!</h2>
            <p id="final-msg" class="text-gray-600 mb-8 max-w-md"></p>
            
            <div class="flex gap-4">
                <button onclick="restartQuiz()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition-colors">
                    Intentar Nuevamente
                </button>
                <a href="#" onclick="window.location.reload()" class="px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors">
                    Salir
                </a>
            </div>
        </div>

    </div>

    <!-- Scripts -->
    <script>
        // Data Base de Questões (10 Nuevas Preguntas)
        const quizData = [
            {
                category: "Miología",
                question: "¿En qué plano muscular se encuadra el músculo dorsal ancho?",
                options: [
                    "Plano profundo",
                    "Plano de los músculos serratos posteriores",
                    "Plano de los músculos romboides",
                    "Plano superficial"
                ],
                correct: 3,
                explanation: "Correcto. El dorsal ancho, junto con el trapecio, forma parte del plano superficial de los músculos del dorso."
            },
            {
                category: "Miología",
                question: "¿Cuál de los siguientes músculos pertenece al grupo erector de la columna?",
                options: [
                    "Romboides mayor",
                    "Trapecio",
                    "Longísimo",
                    "Serrato posterior superior"
                ],
                correct: 2,
                explanation: "Correcto. El grupo erector de la columna está compuesto por el iliocostal, el longísimo y el espinoso."
            },
            {
                category: "Miología",
                question: "La masa común (tendón de origen del erector de la columna) se localiza principalmente a nivel:",
                options: [
                    "Cervical",
                    "Torácico superior",
                    "Sacrolumbar",
                    "Occipital"
                ],
                correct: 2,
                explanation: "Correcto. La masa común es una potente estructura tendinosa en la región sacrolumbar que da origen a los músculos erectores."
            },
            {
                category: "Funcional",
                question: "¿Cuál es la función principal del músculo transversoespinoso?",
                options: [
                    "Aducción del miembro superior",
                    "Inspiración forzada",
                    "Estabilización y rotación de la columna",
                    "Elevación de la escápula"
                ],
                correct: 2,
                explanation: "Correcto. Este grupo muscular profundo conecta vértebras adyacentes y es crucial para estabilizar y rotar la columna."
            },
            {
                category: "Osteología",
                question: "¿Qué característica es típica de una vértebra cervical?",
                options: [
                    "Apófisis espinosa larga e inclinada hacia abajo",
                    "Cuerpo vertebral reniforme",
                    "Agujero transverso en las apófisis transversas",
                    "Ausencia de apófisis espinosa"
                ],
                correct: 2,
                explanation: "Correcto. La presencia del agujero (foramen) transverso para el paso de la arteria vertebral es el rasgo distintivo de las vértebras cervicales."
            },
            {
                category: "Osteología",
                question: "¿Cuál de las siguientes vértebras carece de cuerpo vertebral?",
                options: [
                    "C2 (Axis)",
                    "C1 (Atlas)",
                    "T1",
                    "L1"
                ],
                correct: 1,
                explanation: "Correcto. El Atlas (C1) es una vértebra atípica que no tiene cuerpo vertebral; está formada por masas laterales y arcos."
            },
            {
                category: "Osteología",
                question: "Las fositas costales en el cuerpo vertebral son características de las vértebras:",
                options: [
                    "Cervicales",
                    "Torácicas",
                    "Lumbares",
                    "Sacras"
                ],
                correct: 1,
                explanation: "Correcto. Las fositas costales sirven para articularse con las costillas, por lo que son exclusivas de las vértebras torácicas."
            },
            {
                category: "Clínica",
                question: "¿En qué nivel se realiza habitualmente la punción lumbar en el adulto?",
                options: [
                    "L1–L2",
                    "L2–L3",
                    "L3–L4 o L4–L5",
                    "L5–S1"
                ],
                correct: 2,
                explanation: "Correcto. Se realiza en L3-L4 o L4-L5 para asegurar que la aguja se introduzca por debajo del cono medular (que termina en L1-L2)."
            },
            {
                category: "Clínica",
                question: "La dirección más frecuente de las hernias de disco intervertebral se explica anatómicamente por:",
                options: [
                    "La disposición del ligamento longitudinal anterior",
                    "La orientación de las apófisis articulares",
                    "La disposición del ligamento longitudinal posterior",
                    "La forma del cuerpo vertebral"
                ],
                correct: 2,
                explanation: "Correcto. El ligamento longitudinal posterior es más estrecho o festoneado lateralmente, dejando una zona de debilidad posterolateral."
            },
            {
                category: "Articulaciones",
                question: "¿Qué tipo de articulación une los cuerpos vertebrales entre sí?",
                options: [
                    "Sinovial plana",
                    "Sincondrosis",
                    "Sínfisis",
                    "Gínglimo"
                ],
                correct: 2,
                explanation: "Correcto. La unión entre los cuerpos vertebrales mediante el disco intervertebral se clasifica como una articulación tipo sínfisis (cartilaginosa secundaria)."
            }
        ];

        // Estado do Quiz
        let currentQuestion = 0;
        let score = 0;
        let answers = new Array(quizData.length).fill(null);
        let isAnswered = false;

        // Elementos DOM
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const qText = document.getElementById('q-text');
        const qCategory = document.getElementById('q-category');
        const optionsContainer = document.getElementById('options-container');
        const feedbackArea = document.getElementById('feedback-area');
        const feedbackTitle = document.getElementById('feedback-title');
        const feedbackText = document.getElementById('feedback-text');
        const nextBtn = document.getElementById('next-btn');
        const progressContainer = document.getElementById('progress-container');
        const progressBar = document.getElementById('progress-bar');
        const currentQNum = document.getElementById('current-q');
        const totalQNum = document.getElementById('total-q');

        // Inicialização
        document.getElementById('total-q').innerText = quizData.length;

        function startQuiz() {
            startScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            progressContainer.classList.remove('hidden');
            progressContainer.classList.add('flex');
            loadQuestion();
        }

        function loadQuestion() {
            isAnswered = false;
            feedbackArea.classList.add('hidden');
            const data = quizData[currentQuestion];
            
            // Atualizar UI
            qCategory.innerText = data.category;
            qText.innerText = data.question;
            currentQNum.innerText = currentQuestion + 1;
            progressBar.style.width = `${((currentQuestion) / quizData.length) * 100}%`;

            // Gerar Opções
            optionsContainer.innerHTML = '';
            data.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = `option-card w-full text-left p-4 rounded-xl border-2 border-gray-200 bg-white hover:border-blue-400 focus:outline-none transition-all duration-200 flex items-center gap-3 group`;
                btn.onclick = () => checkAnswer(index, btn);
                
                // Círculo de seleção
                const circle = document.createElement('div');
                circle.className = "w-6 h-6 rounded-full border-2 border-gray-300 flex-shrink-0 flex items-center justify-center group-hover:border-blue-400";
                circle.innerHTML = `<div class="w-3 h-3 bg-blue-500 rounded-full opacity-0 transform scale-0 transition-all duration-200"></div>`;
                
                const text = document.createElement('span');
                text.className = "text-gray-700 font-medium text-sm md:text-base";
                text.innerText = opt;

                btn.appendChild(circle);
                btn.appendChild(text);
                optionsContainer.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, btnElement) {
            if (isAnswered) return;
            isAnswered = true;
            answers[currentQuestion] = selectedIndex;

            const correctIndex = quizData[currentQuestion].correct;
            const options = optionsContainer.children;

            // Estilizar todas as opções
            for (let i = 0; i < options.length; i++) {
                options[i].classList.add('disabled', 'cursor-default');
                options[i].onclick = null; // Remove click
                
                if (i === correctIndex) {
                    options[i].classList.add('correct-anim');
                    options[i].querySelector('div').classList.add('border-green-500');
                    options[i].querySelector('div > div').classList.add('bg-green-500', 'opacity-100', 'scale-100');
                    options[i].innerHTML += `<i class="fas fa-check text-green-600 ml-auto"></i>`;
                } else if (i === selectedIndex && i !== correctIndex) {
                    options[i].classList.add('wrong-anim');
                    options[i].querySelector('div').classList.add('border-red-500');
                    options[i].querySelector('div > div').classList.add('bg-red-500', 'opacity-100', 'scale-100');
                    options[i].innerHTML += `<i class="fas fa-times text-red-500 ml-auto"></i>`;
                } else {
                    options[i].classList.add('opacity-50');
                }
            }

            // Atualizar Score
            if (selectedIndex === correctIndex) score++;

            // Mostrar Feedback
            feedbackArea.classList.remove('hidden');
            feedbackArea.classList.add('fade-in');
            
            if (selectedIndex === correctIndex) {
                feedbackTitle.innerText = "¡Correcto!";
                feedbackTitle.className = "font-bold text-green-700 mb-1";
                document.getElementById('feedback-icon').innerHTML = '<i class="fas fa-check-circle text-green-600 text-xl"></i>';
                feedbackArea.className = "mt-auto bg-green-50 border-l-4 border-green-500 p-4 rounded-r-lg";
            } else {
                feedbackTitle.innerText = "Incorrecto. La respuesta correcta es:";
                feedbackTitle.className = "font-bold text-red-700 mb-1";
                document.getElementById('feedback-icon').innerHTML = '<i class="fas fa-info-circle text-red-600 text-xl"></i>';
                feedbackArea.className = "mt-auto bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg";
            }
            
            feedbackText.innerText = quizData[currentQuestion].explanation;

            // Configurar botão next
            if (currentQuestion === quizData.length - 1) {
                nextBtn.innerText = "Ver Resultados";
                nextBtn.onclick = showResults;
            }
        }

        function nextQuestion() {
            currentQuestion++;
            loadQuestion();
        }

        function showResults() {
            quizScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            progressContainer.classList.add('hidden');

            const percentage = Math.round((score / quizData.length) * 100);
            document.getElementById('final-score').innerText = `${percentage}%`;
            
            // Animar círculo
            const circle = document.getElementById('score-circle');
            const circumference = 2 * Math.PI * 56;
            const offset = circumference - (percentage / 100) * circumference;
            setTimeout(() => {
                circle.style.strokeDashoffset = offset;
                // Cor baseada na nota
                if(percentage >= 80) circle.style.stroke = "#10b981"; // Green
                else if(percentage >= 60) circle.style.stroke = "#f59e0b"; // Orange
                else circle.style.stroke = "#ef4444"; // Red
            }, 100);

            // Mensagem
            const msg = document.getElementById('final-msg');
            if (percentage === 100) msg.innerText = "¡Excelente! Dominas la anatomía del dorso.";
            else if (percentage >= 80) msg.innerText = "¡Gran trabajo! Tienes una comprensión sólida.";
            else if (percentage >= 60) msg.innerText = "Buen comienzo. Revisa los conceptos donde fallaste.";
            else msg.innerText = "Sigue estudiando. Repasa la anatomía básica del dorso.";
        }

        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            isAnswered = false;
            answers.fill(null);
            
            resultScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            progressContainer.classList.remove('hidden');
            
            // Resetar círculo de progresso
            document.getElementById('score-circle').style.strokeDashoffset = 351;
            
            loadQuestion();
        }
    </script>
</body>
</html>
